import{m as j,V as ge,r as Q,c as s,w as R,v as he,h as y,W as me,k as ye,g as z,y as ke}from"./index.02176f2b.js";import{d as be,u as qe,v as H,e as xe,a as Ce,b as we,f as Se,g as Pe,c as Te,r as _,s as Oe,p as W,h as Be,i as Ee}from"./position-engine.2625858a.js";import{u as pe,a as Fe,b as De,d as Ae,g as Ke}from"./selection.02425b78.js";import{u as I,a as U}from"./QItem.8e917815.js";import{c as S,h as P}from"./render.bb221d47.js";import{e as Me}from"./QBtn.e5691bad.js";import{a as Le}from"./index.416c10b7.js";const r=[];let f;function Qe(e){f=e.keyCode===27}function Re(){f===!0&&(f=!1)}function He(e){f===!0&&(f=!1,ge(e,27)===!0&&r[r.length-1](e))}function V(e){window[e]("keydown",Qe),window[e]("blur",Re),window[e]("keyup",He),f=!1}function _e(e){j.is.desktop===!0&&(r.push(e),r.length===1&&V("addEventListener"))}function $(e){const o=r.indexOf(e);o>-1&&(r.splice(o,1),r.length===0&&V("removeEventListener"))}const l=[];function G(e){l[l.length-1](e)}function We(e){j.is.desktop===!0&&(l.push(e),l.length===1&&document.body.addEventListener("focusin",G))}function $e(e){const o=l.indexOf(e);o>-1&&(l.splice(o,1),l.length===0&&document.body.removeEventListener("focusin",G))}var Xe=S({name:"QMenu",inheritAttrs:!1,props:{...be,...pe,...I,...qe,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:H},self:{type:String,validator:H},offset:{type:Array,validator:xe},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Fe,"click","escapeKey"],setup(e,{slots:o,emit:n,attrs:v}){let a=null,m,g,k;const T=z(),{proxy:b}=T,{$q:u}=b,i=Q(null),c=Q(!1),J=s(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),N=U(e,u),{registerTick:X,removeTick:Y}=Ce(),{registerTimeout:O}=De(),{transitionProps:Z,transitionStyle:ee}=we(e),{localScrollTarget:B,changeScrollEvent:te,unconfigureScrollTarget:oe}=Se(e,M),{anchorEl:d,canShow:ne}=Pe({showing:c}),{hide:E}=Ae({showing:c,canShow:ne,handleShow:re,handleHide:le,hideOnRouteChange:J,processOnMount:!0}),{showPortal:p,hidePortal:F,renderPortal:ae}=Te(T,i,de,"menu"),q={anchorEl:d,innerRef:i,onClickOutside(t){if(e.persistent!==!0&&c.value===!0)return E(t),(t.type==="touchstart"||t.target.classList.contains("q-dialog__backdrop"))&&ke(t),!0}},D=s(()=>W(e.anchor||(e.cover===!0?"center middle":"bottom start"),u.lang.rtl)),se=s(()=>e.cover===!0?D.value:W(e.self||"top start",u.lang.rtl)),ue=s(()=>(e.square===!0?" q-menu--square":"")+(N.value===!0?" q-menu--dark q-dark":"")),ie=s(()=>e.autoClose===!0?{onClick:ce}:{}),A=s(()=>c.value===!0&&e.persistent!==!0);R(A,t=>{t===!0?(_e(C),Be(q)):($(C),_(q))});function x(){Le(()=>{let t=i.value;t&&t.contains(document.activeElement)!==!0&&(t=t.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||t.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||t.querySelector("[autofocus], [data-autofocus]")||t,t.focus({preventScroll:!0}))})}function re(t){if(a=e.noRefocus===!1?document.activeElement:null,We(L),p(),M(),m=void 0,t!==void 0&&(e.touchPosition||e.contextMenu)){const w=he(t);if(w.left!==void 0){const{top:fe,left:ve}=d.value.getBoundingClientRect();m={left:w.left-ve,top:w.top-fe}}}g===void 0&&(g=R(()=>u.screen.width+"|"+u.screen.height+"|"+e.self+"|"+e.anchor+"|"+u.lang.rtl,h)),e.noFocus!==!0&&document.activeElement.blur(),X(()=>{h(),e.noFocus!==!0&&x()}),O(()=>{u.platform.is.ios===!0&&(k=e.autoClose,i.value.click()),h(),p(!0),n("show",t)},e.transitionDuration)}function le(t){Y(),F(),K(!0),a!==null&&(t===void 0||t.qClickOutside!==!0)&&(((t&&t.type.indexOf("key")===0?a.closest('[tabindex]:not([tabindex^="-"])'):void 0)||a).focus(),a=null),O(()=>{F(!0),n("hide",t)},e.transitionDuration)}function K(t){m=void 0,g!==void 0&&(g(),g=void 0),(t===!0||c.value===!0)&&($e(L),oe(),_(q),$(C)),t!==!0&&(a=null)}function M(){(d.value!==null||e.scrollTarget!==void 0)&&(B.value=Ke(d.value,e.scrollTarget),te(B.value,h))}function ce(t){k!==!0?(Ee(b,t),n("click",t)):k=!1}function L(t){A.value===!0&&e.noFocus!==!0&&Me(i.value,t.target)!==!0&&x()}function C(t){n("escapeKey"),E(t)}function h(){const t=i.value;t===null||d.value===null||Oe({el:t,offset:e.offset,anchorEl:d.value,anchorOrigin:D.value,selfOrigin:se.value,absoluteOffset:m,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function de(){return y(me,Z.value,()=>c.value===!0?y("div",{role:"menu",...v,ref:i,tabindex:-1,class:["q-menu q-position-engine scroll"+ue.value,v.class],style:[v.style,ee.value],...ie.value},P(o.default)):null)}return ye(K),Object.assign(b,{focus:x,updatePosition:h}),ae}});let je=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const o=document.createElement("div");Object.assign(o.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(o),e.scrollLeft=-1e3,je=e.scrollLeft>=0,e.remove()}var Ye=S({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:o}){const n=s(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>y(e.tag,{class:n.value},P(o.default))}}),Ze=S({name:"QCard",props:{...I,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:o}){const{proxy:{$q:n}}=z(),v=U(e,n),a=s(()=>"q-card"+(v.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>y(e.tag,{class:a.value},P(o.default))}});export{Xe as Q,$ as a,We as b,_e as c,je as d,Ye as e,Ze as f,$e as r};
