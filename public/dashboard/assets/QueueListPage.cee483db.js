import{c as V,Q as w,b as S,d as B}from"./index.ea02bfa5.js";import{Q as u,b as p,c as g,d as U}from"./QItem.8239b130.js";import{h as $}from"./QPagination.61ad762e.js";import{Q as f,R as I}from"./QBtn.c72b741f.js";import{Q as A}from"./QPage.edcf2b5a.js";import{_ as r}from"./StatusCount.d90a2531.js";import{H as P,I as l,J as i,K as a,d as e,M as _,N,P as q,r as v,w as F,o as z,k as D,Q as c,F as E,R as H,L as M,A as C}from"./index.71e0cdb1.js";import"./render.5d0681f9.js";import"./axios.d530bc82.js";import"./format.a33550d6.js";import"./QAvatar.8643098c.js";import"./position-engine.df75501b.js";import"./selection.21adb5a4.js";const j={class:"text-weight-medium"},J={class:"text-grey-8 q-gutter-xs"},K=P({__name:"QueueListItem",props:{queue:null},setup(Q){const t=Q;return(o,d)=>(l(),i(g,{clickable:"",to:{path:"/queues/"+encodeURIComponent(t.queue.name)}},{default:a(()=>[e(u,{avatar:"",top:""},{default:a(()=>[e(f,{name:"queue",color:"black",size:"34px"})]),_:1}),e(u,{top:"",class:"col-2 gt-sm"},{default:a(()=>[e(p,{class:"q-mt-sm"},{default:a(()=>[_(N(t.queue.name),1)]),_:1})]),_:1}),e(u,{top:""},{default:a(()=>[e(p,{lines:"1"},{default:a(()=>[q("span",j,N(t.queue.name),1)]),_:1}),e(p,{caption:"",lines:"5"},{default:a(()=>[e(r,{count:t.queue.queued,label:"Queued",color:"primary"},null,8,["count"]),e(r,{count:t.queue.started,label:"Running",color:"info"},null,8,["count"]),e(r,{count:t.queue.cancelled,label:"Cancelled",color:"warning"},null,8,["count"]),e(r,{count:t.queue.failed,label:"Failed",color:"negative"},null,8,["count"]),e(r,{count:t.queue.succeeded,label:"Succeeded",color:"positive"},null,8,["count"])]),_:1})]),_:1}),e(u,{top:"",side:""},{default:a(()=>[q("div",J,[e(f,{class:"gt-xs",size:"12px",icon:"keyboard_arrow_right"})])]),_:1})]),_:1},8,["to"]))}}),T={key:0},G={class:"q-pa-lg flex flex-center"},O={key:1},W={key:2},ie=P({__name:"QueueListPage",setup(Q){const t=v(null),o=v(null),d=v(1);F(d,(n,s)=>{b()});function b(){o.value!==null&&o.value.stop(),o.value=V.queues.search().page(d.value).bypassAuth().listen().onUpdated(n=>t.value=n).start()}z(()=>b()),D(()=>{o.value!==null&&o.value.stop()});function R(n){var s;return(s=n.name)!=null?s:"default"}return(n,s)=>(l(),i(A,{class:"justify-evenly",padding:""},{default:a(()=>[e(S,null,{default:a(()=>[e(w,{icon:"list",to:"/queues",label:"Queues"}),e(w,{to:"/queues",label:"List Queues"})]),_:1}),e(U,{class:"rounded-borders q-pa-lg"},{default:a(()=>{var h,x,k,y,L;return[e(p,{header:""},{default:a(()=>[_("All Queues")]),_:1}),((h=t.value)==null?void 0:h.total)>0?(l(),c("div",T,[e(B),(l(!0),c(E,null,H((k=(x=t.value)==null?void 0:x.data)!=null?k:[],m=>(l(),c("div",{key:R(m)},[e(K,{queue:m},null,8,["queue"]),e(B)]))),128)),q("div",G,[((y=t.value)==null?void 0:y.total)>0?(l(),i($,{key:0,input:"","model-value":t.value.current_page,"onUpdate:modelValue":s[0]||(s[0]=m=>d.value=m),max:t.value.last_page},null,8,["model-value","max"])):M("",!0)])])):((L=t.value)==null?void 0:L.total)===0?(l(),c("div",O,[C((l(),i(g,{clickable:""},{default:a(()=>[e(u,{avatar:""},{default:a(()=>[e(f,{color:"negative",name:"warning"})]),_:1}),e(u,null,{default:a(()=>[_("No queues found")]),_:1})]),_:1})),[[I]])])):(l(),c("div",W,[C((l(),i(g,{clickable:""},{default:a(()=>[e(u,{avatar:""},{default:a(()=>[e(f,{color:"primary",name:"sync"})]),_:1}),e(u,null,{default:a(()=>[_("Loading")]),_:1})]),_:1})),[[I]])]))]}),_:1})]),_:1}))}});export{ie as default};
